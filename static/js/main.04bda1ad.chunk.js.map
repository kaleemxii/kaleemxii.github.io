{"version":3,"sources":["model/worker.ts","components/BlurContainer.tsx","components/SquareButton.tsx","Icons/check.svg","Icons/no-check.svg","components/camera/SourceSelectorItem.tsx","Icons/gear.svg","components/camera/SourceSelector.tsx","components/camera/Camera.tsx","components/prediction/PredictionEntry.tsx","components/prediction/Prediction.tsx","Icons/gallery.svg","components/staticImage/ImageSelectorButton.tsx","Icons/close.svg","components/staticImage/ImageCloseButton.tsx","components/staticImage/StaticImage.tsx","components/App.tsx","reportWebVitals.ts","index.tsx"],"names":["addMethods","methods","module","exports","w","Worker","name","BlurContainer","additionalClassname","children","className","SquareButton","onClick","setHover","undefined","onMouseEnter","onMouseLeave","SourceSelectorItem","selected","onSelect","src","check","noCheck","alt","SourceSelector","devices","deviceId","setDeviceId","imageFlip","setImageFlip","selectorVisible","setSelectorVisible","useState","hovering","id","e","stopPropagation","gear","map","device","key","label","replace","Camera","lastLabel","predictCanvas","predictions","setDevices","webcamRef","useRef","handleDevices","useCallback","mediaDevices","videoDevices","filter","kind","length","useEffect","navigator","enumerateDevices","then","getCanvas","a","current","newImage","sleep","ms","Promise","resolve","reject","setTimeout","canvas","currentCanvas","ref","screenshotFormat","forceScreenshotSourceSize","screenshotQuality","audio","videoConstraints","width","ideal","height","exact","mirrored","labelFrameCounts","labelCounts","PredictionEntry","confidence","top","Object","entries","reduce","b","style","toString","Prediction","sortedPredictions","sort","slice","idx","ImageSelectorButton","setImageFile","imageFile","fileInput","value","click","gallery","type","accept","onChange","files","target","display","ImageCloseButton","close","StaticImage","image","reader","FileReader","onload","img","Image","ctx","getContext","drawImage","result","backgroundImage","readAsDataURL","modelWorker","ModelWorker","loadModel","App","setPredictions","imageData","getImageData","predict","results","Confidences","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.04bda1ad.chunk.js","sourcesContent":["\n\t\t\t\tvar addMethods = require(\"../../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"loadModel\",\"disposeModel\",\"predict\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"92b256aa9befbb64d37d.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","import React, {FunctionComponent} from \"react\";\r\nimport './BlurContainer.css';\r\n\r\ntype BlurContainerType = {\r\n    additionalClassname?: string\r\n}\r\n\r\nconst BlurContainer: FunctionComponent<BlurContainerType> = ({ additionalClassname, children }) => {\r\n    // simple container with rounded corners and a blurred translucent background\r\n    let className = \"blur-container\";\r\n    if (!!additionalClassname) {\r\n        className = className + ` ${additionalClassname}`;\r\n    }\r\n    return (\r\n        <div className={className}>\r\n            { children }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default BlurContainer;\r\n","import React, {FunctionComponent} from \"react\";\r\nimport BlurContainer from \"./BlurContainer\";\r\nimport \"./SquareButton.css\";\r\n\r\ntype SquareButtonProps = {\r\n    onClick?: () => void,\r\n    setHover?: (hovering: boolean) => void\r\n};\r\n\r\nconst SquareButton: FunctionComponent<SquareButtonProps> = ({ onClick, setHover, children }) => {\r\n    // Square button that is inside the blur container\r\n    return (\r\n        <div\r\n            onClick={onClick ? () => onClick() : undefined}\r\n            onMouseEnter={setHover ? () => setHover(true) : undefined}\r\n            onMouseLeave={setHover ? () => setHover(false) : undefined}\r\n        >\r\n            <BlurContainer additionalClassname=\"square-button\">\r\n                { children }\r\n            </BlurContainer>\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default SquareButton;\r\n","export default __webpack_public_path__ + \"static/media/check.20cd8e75.svg\";","export default __webpack_public_path__ + \"static/media/no-check.34c030ac.svg\";","import React from \"react\";\r\nimport check from \"../../Icons/check.svg\";\r\nimport noCheck from \"../../Icons/no-check.svg\";\r\n\r\nimport \"./SourceSelectorItem.css\";\r\n\r\n\r\ntype SourceSelectorItemProps = {\r\n    name: string,\r\n    selected: boolean,\r\n    onSelect: () => void\r\n}\r\n\r\n// Component for selecting the webcam source and flipping the image horizontally\r\nfunction SourceSelectorItem({selected, onSelect, name}: SourceSelectorItemProps) {\r\n\r\n    return (\r\n        <div key={name} className=\"source-item-container\" >\r\n            <div className={`source-device${(selected) ? \" source-selected\" : \"\"}`}>\r\n                {name}\r\n            </div>\r\n            <div onClick={() => onSelect()} className=\"source-radio-button\">\r\n                <img src={selected ? check : noCheck} alt={'Select device'} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SourceSelectorItem;\r\n","export default __webpack_public_path__ + \"static/media/gear.9149aa4b.svg\";","import React, {useState} from \"react\";\r\nimport SquareButton from \"../SquareButton\";\r\nimport BlurContainer from \"../BlurContainer\";\r\nimport SourceSelectorItem from \"./SourceSelectorItem\";\r\nimport gear from \"../../Icons/gear.svg\";\r\n\r\nimport \"./SourceSelector.css\";\r\nimport check from \"../../Icons/check.svg\";\r\nimport noCheck from \"../../Icons/no-check.svg\";\r\n\r\n\r\ntype SourceSelectorProps = {\r\n    devices: MediaDeviceInfo[]\r\n    deviceId?: string,\r\n    setDeviceId: (deviceId: string) => void,\r\n    imageFlip: boolean,\r\n    setImageFlip: (imageFlip: boolean) => void,\r\n    selectorVisible: boolean,\r\n    setSelectorVisible: (visible: boolean) => void\r\n}\r\n\r\n// Component for selecting the webcam source and flipping the image horizontally\r\nfunction SourceSelector({devices, deviceId, setDeviceId, imageFlip, setImageFlip, selectorVisible, setSelectorVisible}: SourceSelectorProps) {\r\n    const [hovering, setHover] = useState(false);\r\n\r\n    return (\r\n        <div\r\n            id=\"camera-select-button\"\r\n            onClick={(e) => e.stopPropagation()}\r\n            onMouseLeave={() => {setSelectorVisible(false)}}\r\n        >\r\n            <SquareButton setHover={(hovering) => {setHover(hovering); if (hovering) setSelectorVisible(true);}}>\r\n                <img id=\"gear-icon\" src={gear} alt={\"Gear Icon\"} className={selectorVisible || hovering ? \"gear-rotated\" : undefined} />\r\n            </SquareButton>\r\n            <BlurContainer additionalClassname={`source-selector${selectorVisible ? \" source-expanded\" : \"\"}`}>\r\n                {devices.map((device, key) => (\r\n                    <SourceSelectorItem\r\n                        name={!!device.label ? device.label.replace(/\\(.*\\)/g, '') : `Device ${key + 1}`}\r\n                        onSelect={() => setDeviceId(device.deviceId)}\r\n                        selected={device.deviceId === deviceId}\r\n                        key={device.deviceId}\r\n                    />\r\n                ))}\r\n                <div className=\"toggle-container\">\r\n                    <div className=\"toggle-item-container\">\r\n                        <div className={`toggle-item source-device${(imageFlip) ? \" source-selected\" : \"\"}`}>\r\n                            {\"Flip Image\"}\r\n                        </div>\r\n                        <div onClick={() => setImageFlip(!imageFlip)} className=\"toggle-radio-button\">\r\n                            <img src={imageFlip ? check : noCheck} alt={'Flip Webcam Button'} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </BlurContainer>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SourceSelector;\r\n","import React, {useEffect, useState, useRef, useCallback} from \"react\";\r\nimport Webcam from \"react-webcam\";\r\nimport SourceSelector from \"./SourceSelector\";\r\nimport \"./Camera.css\";\r\n\r\ntype CameraProps = {\r\n    predictCanvas: (canvas: HTMLCanvasElement) => void;\r\n    predictions?: { [label: string]: number };\r\n}\r\n\r\n// Our webcam display and capture component\r\nfunction Camera({ predictCanvas, predictions }: CameraProps) {\r\n    const [devices, setDevices] = useState<MediaDeviceInfo[]>([]);\r\n    const [deviceId, setDeviceId] = useState<string | undefined>(undefined);\r\n    const [imageFlip, setImageFlip] = useState(true);\r\n    const webcamRef = useRef<Webcam>(null);\r\n    const [selectorVisible, setSelectorVisible] = useState(false);\r\n\r\n    // handle any webcam plugged into the computer\r\n    // https://github.com/mozmorris/react-webcam#show-all-cameras-by-deviceid\r\n    const handleDevices = useCallback(\r\n        (mediaDevices: MediaDeviceInfo[]) => {\r\n            // find all the webcams\r\n            const videoDevices = mediaDevices.filter(({kind}) => kind === \"videoinput\");\r\n            setDevices(videoDevices);\r\n            // set our initial webcam to be the first in the list\r\n            if (videoDevices.length > 0) {\r\n                setDeviceId(videoDevices[0].deviceId);\r\n            }\r\n        },[setDevices, setDeviceId]\r\n    );\r\n    useEffect(() => {\r\n        navigator.mediaDevices.enumerateDevices().then(handleDevices);\r\n    }, [handleDevices]);\r\n\r\n    // function to grab the current frame drawn on canvas from the webcam\r\n    const getCanvas: () => Promise<HTMLCanvasElement | undefined> = useCallback(async () => {\r\n        let newImage;\r\n        if (webcamRef.current) {\r\n            newImage = webcamRef.current.getCanvas();\r\n            if (newImage) {\r\n                return newImage;\r\n            }\r\n        }\r\n    }, [webcamRef]);\r\n\r\n    // helper for waiting in our loop when the camera is loading (getting the image)\r\n    const sleep = useCallback((ms: number) => {\r\n        return new Promise<NodeJS.Timeout>(function (resolve, reject) {\r\n            setTimeout(resolve, ms);\r\n        });\r\n    }, []);\r\n\r\n    // while we have the webcam mounted, predict frames as fast as we get new predictions back from the model\r\n    useEffect(() => {\r\n        getCanvas().then(async (canvas: HTMLCanvasElement | undefined) => {\r\n            let currentCanvas = canvas;\r\n            while (!currentCanvas) {\r\n                // if no canvas, wait 500ms and try again\r\n                await sleep(500);\r\n                currentCanvas = await getCanvas();\r\n            }\r\n            if (currentCanvas) {\r\n                predictCanvas(currentCanvas);\r\n            }\r\n        })\r\n    }, [sleep, predictions, deviceId, getCanvas, predictCanvas])\r\n\r\n    return (\r\n        <div id=\"video-container\" onClick={() => setSelectorVisible(false)}>\r\n            <SourceSelector\r\n                devices={devices}\r\n                deviceId={deviceId}\r\n                setDeviceId={setDeviceId}\r\n                imageFlip={imageFlip}\r\n                setImageFlip={setImageFlip}\r\n                selectorVisible={selectorVisible}\r\n                setSelectorVisible={setSelectorVisible}\r\n            />\r\n            <Webcam\r\n                ref={webcamRef}\r\n                screenshotFormat=\"image/jpeg\"\r\n                forceScreenshotSourceSize={true}\r\n                screenshotQuality={1}\r\n                audio={false}\r\n                videoConstraints={{\r\n                    width: {ideal: 1920},\r\n                    height: {ideal: 1080},\r\n                    deviceId: !!deviceId ? {exact: deviceId} : undefined\r\n                }}\r\n                mirrored={imageFlip}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Camera;\r\n","import React from \"react\";\r\nimport \"./PredictionEntry.css\";\r\nvar labelFrameCounts: { [id: string] : number; } = {};\r\nvar labelCounts: { [id: string] : number; } = {};\r\nvar lastLabel:string;\r\ntype PredictionEntryProps = {\r\n    label: string\r\n    confidence?: number\r\n    top?: boolean\r\n}\r\n\r\nfunction PredictionEntry({label, confidence, top}: PredictionEntryProps) {\r\n    // render the predicted label and a bar representing the confidence value\r\n    // make the top confidence value green\r\n    if(top && !!confidence && confidence > 0.5 && label!='None'){\r\n        var count = labelFrameCounts[label] = (labelFrameCounts[label] || 0) + 1;\r\n        var maxCount = Object.entries(labelFrameCounts).filter(a => a[0] != label).reduce((a, b) => a[1] > b[1] ? a : b , ['', 0])[1]\r\n        if(count - maxCount > 8){\r\n            labelFrameCounts = {};\r\n            if(lastLabel != label) {\r\n                labelCounts[label] = (labelCounts[label] || 0) + 1;\r\n                lastLabel = label;\r\n            }\r\n        }\r\n    }\r\n    return (\r\n        <div key={label} className=\"prediction-entry\">\r\n            {label + (labelCounts[label] ? '->' : '') + (labelCounts[label] || '') }\r\n            {!!confidence ?\r\n                <div\r\n                    className={\"prediction-bar\" + (top ? \" prediction-green\" : \"\")}\r\n                    style={{width: (confidence*100).toString() + \"%\"}}\r\n                />\r\n            : null}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PredictionEntry;\r\n","import React from \"react\";\r\nimport BlurContainer from \"../BlurContainer\";\r\nimport PredictionEntry from \"./PredictionEntry\";\r\nimport \"./Prediction.css\";\r\n\r\ntype PredictionProps = {\r\n    predictions?: { [label: string]: number },\r\n    top?: number\r\n}\r\n\r\nfunction Prediction({predictions, top=3}: PredictionProps) {\r\n    // display the top N (default 3) predictions returned from the model\r\n    let sortedPredictions: Array<[string, number]> | undefined;\r\n    if (!!predictions) {\r\n        // sort our predictions by the confidence value and take the top N\r\n        sortedPredictions = Object.entries(predictions)\r\n            .sort((a, b) => b[1] - a[1])\r\n            .slice(0, top);\r\n    }\r\n    return (\r\n        <div id=\"predictions\">\r\n            <BlurContainer additionalClassname=\"prediction-container\">\r\n                {!!sortedPredictions ?\r\n                    sortedPredictions.map(([label, confidence], idx) => (\r\n                        <PredictionEntry key={label} label={label} confidence={confidence} top={idx===0} />\r\n                    ))\r\n                    : <PredictionEntry label={'Loading...'} />\r\n                }\r\n            </BlurContainer>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Prediction;\r\n","export default __webpack_public_path__ + \"static/media/gallery.4ec4eac8.svg\";","import React, {useEffect, useRef} from \"react\";\r\nimport SquareButton from \"../SquareButton\";\r\nimport gallery from \"../../Icons/gallery.svg\";\r\n\r\nimport \"./ImageSelectorButton.css\";\r\n\r\ntype ImageSelectorButtonProps = {\r\n    setImageFile: (image: File | null) => void;\r\n    imageFile: File | null;\r\n};\r\n\r\n// Component for selecting an image file for prediction\r\nfunction ImageSelectorButton({setImageFile, imageFile}: ImageSelectorButtonProps) {\r\n    // ref to the hidden file input element\r\n    const fileInput = useRef<HTMLInputElement>(null);\r\n\r\n    // if we have a null file (from clearing the image), clear the file input value\r\n    useEffect(\r\n        () => {\r\n            if (!imageFile && fileInput.current) {\r\n                fileInput.current.value = \"\";\r\n            }\r\n        },\r\n        [imageFile, fileInput]\r\n    )\r\n\r\n    // make an onclick that will open the file dialog\r\n    const onClick = () => {\r\n        if (fileInput.current) {\r\n            fileInput.current.click();\r\n        }\r\n    }\r\n\r\n    // set our image file from the picker\r\n    const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const files = e.target.files;\r\n        if (files && files.length > 0) {\r\n            setImageFile(files[0]);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div\r\n            id=\"image-select-button\"\r\n            onClick={onClick}\r\n        >\r\n            <SquareButton>\r\n                <img id=\"gallery-icon\" src={gallery} alt={\"File Selector\"} />\r\n            </SquareButton>\r\n            <input ref={fileInput} type=\"file\" accept=\"image/*\" onChange={onChange} style={{display: \"none\"}} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ImageSelectorButton;\r\n","export default __webpack_public_path__ + \"static/media/close.3de684eb.svg\";","import React from \"react\";\r\nimport SquareButton from \"../SquareButton\";\r\nimport close from \"../../Icons/close.svg\";\r\n\r\nimport \"./ImageCloseButton.css\";\r\n\r\ntype ImageCloseButtonProps = {\r\n    setImageFile: (image: File | null) => void;\r\n};\r\n\r\n// Component for clearing the static image and going back to the webcam view\r\nfunction ImageCloseButton({setImageFile}: ImageCloseButtonProps) {\r\n    \r\n    const onClick = () => {\r\n        setImageFile(null);\r\n    };\r\n\r\n    return (\r\n        <div id=\"image-close-button\">\r\n            <SquareButton onClick={onClick}>\r\n                <img id=\"close-icon\" src={close} alt={\"Close\"} />\r\n            </SquareButton>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ImageCloseButton;\r\n","import React, {useEffect, useRef} from \"react\";\r\nimport ImageCloseButton from \"./ImageCloseButton\";\r\n\r\nimport \"./StaticImage.css\";\r\n\r\ntype StaticImageProps = {\r\n    predictCanvas: (canvas: HTMLCanvasElement) => void;\r\n    image: File;\r\n    setImageFile: (image: File | null) => void;\r\n}\r\n\r\n// Component for displaying our selected image file for prediction\r\nfunction StaticImage({ predictCanvas, image, setImageFile }: StaticImageProps) {\r\n    // display our image file on a canvas and call the predict function with that canvas\r\n    const canvas = useRef<HTMLCanvasElement>(null);\r\n    const display = useRef<HTMLDivElement>(null);\r\n\r\n    useEffect(() => {\r\n        const reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            // make an image to draw on the canvas\r\n            const img = new Image();\r\n            img.onload = () => {\r\n                if (canvas.current) {\r\n                    // draw the image on our canvas\r\n                    canvas.current.width = img.width;\r\n                    canvas.current.height = img.height;\r\n                    const ctx = canvas.current.getContext(\"2d\");\r\n                    if (!!ctx) {\r\n                        // draw our image on the context\r\n                        ctx.drawImage(img,0,0);\r\n                        // drawing is finished, run the prediction!\r\n                        predictCanvas(canvas.current);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // load the image from our reader\r\n            if (e.target) {\r\n                img.src = e.target.result as string;\r\n                if (display.current) {\r\n                    display.current.style.backgroundImage = `url(${e.target.result})`;\r\n                }\r\n            }\r\n        }\r\n        // read our image file and process it!\r\n        reader.readAsDataURL(image);\r\n    }, [image, predictCanvas, display]);\r\n\r\n    return (\r\n        <div id=\"static-image\" ref={display}>\r\n            <ImageCloseButton setImageFile={setImageFile} />\r\n            <canvas ref={canvas} style={{display: \"none\"}} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default StaticImage;\r\n","import React, {useCallback, useState} from 'react';\r\nimport Camera from './camera/Camera';\r\nimport Prediction from './prediction/Prediction';\r\nimport ImageSelectorButton from './staticImage/ImageSelectorButton';\r\nimport StaticImage from './staticImage/StaticImage';\r\n\r\n// @ts-ignore\r\n// eslint-disable-next-line import/no-webpack-loader-syntax\r\nimport ModelWorker from \"workerize-loader!../model/worker\";\r\n\r\n// create our web worker instance for running the tfjs model without blocking the UI thread\r\nconst modelWorker = ModelWorker();\r\n// the filepaths to our exported signature.json and model.json files (in the public/model folder)\r\nconst signatureFile = process.env.PUBLIC_URL + `/model/signature.json`;\r\nconst modelFile = process.env.PUBLIC_URL + `/model/model.json`;\r\n// load our model in the web worker\r\nmodelWorker.loadModel(signatureFile, modelFile);\r\n\r\n\r\nfunction App() {\r\n    // state for keeping track of our predictions -- map of {label: confidence} from running the model on an image\r\n    const [predictions, setPredictions] = useState<{[key: string]: number} | undefined>(undefined);\r\n    // state for using a static image from file picker\r\n    const [imageFile, setImageFile] = useState<File | null>(null);\r\n\r\n    // function to run the image from an html canvas element through our model\r\n    const predictCanvas = useCallback((canvas: HTMLCanvasElement) => {\r\n        // get the canvas context\r\n        const ctx = canvas.getContext('2d');\r\n        if (ctx) {\r\n            // get the pixel data from the full canvas\r\n            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n            // run the async predict function and set the values to our state\r\n            modelWorker.predict(imageData).then((results: {Confidences: {[label: string]: number}}) => {\r\n                if (results) {\r\n                    setPredictions(results.Confidences);\r\n                }\r\n            });\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div>\r\n            <ImageSelectorButton setImageFile={setImageFile} imageFile={imageFile} />\r\n            {\r\n                !imageFile ? \r\n                <Camera predictCanvas={predictCanvas} predictions={predictions} /> :\r\n                <StaticImage predictCanvas={predictCanvas} image={imageFile} setImageFile={setImageFile} />\r\n            }\r\n            <Prediction predictions={predictions}/>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}